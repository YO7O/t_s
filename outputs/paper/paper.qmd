---
title: "Toronto Homeless Shelter by Cities"
author: 
  - Kenneth Chan
thanks: "Code and data are available at: https://github.com/YO7O/toronto_shelter_capacity"
date: today
date-format: long
abstract: "Homelessness and housing is a problem that every big city have to face, and Toronto is no exception. With the constant increase of rent in Toronto, there is no suprise that the need for shelter services is constantly high. We found that the amount of shelters programs with free space drastically differs between different cities nearby Toronto. This paper aims to visualize those difference with graphs and tables."
format: pdf
number-sections: true
toc: true
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false

library(tidyverse)
library(opendatatoronto)
library(knitr)
library(kableExtra)
```

# Introduction {#sec-intro}

Year 2023 is the first year I came back to Canada since COVID-19 happened. I still recall that I was hugely shocked by the inflation in rent, which felt like a 20% increase across the board since I left in 2020. This makes me wonder, if a international student with a decent wealth family background like me is shocked by the rent, how would it affect the homelessness of the city, considering the average salary have not gone up by a huge margin.

This paper aims to analyze the data of shelter programs in different cities, and find out the how many shelter programs are available, or in other words, have free space throughout the year for people that is in need. Despite having a lot of analysis about toronto shelter online, I cannot find one that is specifically aiming towards finding difference in district, hence this paper is written. 

# Data {#sec-data}

Some of our data is of total programs in all shelter in Toronto area (@fig-programs-total), from @opendatatoronto.

```{r}
#| label: fig-programs-total
#| fig-cap: Total distinct program in all shelter based on city
#| echo: false
#| warning: false
#| message: false

analysis_data <- read_csv("../../outputs/data/analysis_data.csv")

analysis_data |> 
  ggplot(aes(x = date, y = total_shelter_program, color = city)) +
  geom_line() +
  theme_minimal() +
  labs(x = "Date", y = "Total shelter programs", color = "City") +
  scale_color_brewer(palette = "Set1") +
  theme(legend.position = "bottom")
```

We can see there is a decrease trend in the programs provided in Toronto area, but it still have the most programs out of all cities. Also, there is barely any services in Scarborough, Etobicoke and Vaughan, which is worth noticing.

Here is our data with program with free space in all shelter around Toronto area (@fig-programs-free), analyzed using tools made by @citeR and @tidyverse

```{r}
#| label: fig-programs-free
#| fig-cap: Distinct program with free space in all shelter based on city
#| echo: false
#| warning: false
#| message: false

analysis_data |> 
  ggplot(aes(x = date, y = shelter_program_with_space, color = city)) +
  geom_line() +
  theme_minimal() +
  labs(x = "Date", y = "Distinct shelter program with free space", color = "City") +
  scale_color_brewer(palette = "Set1") +
  theme(legend.position = "bottom")
```

There is a downward trend in programs with space in Toronto, which could be caused by the decreasing number in total programs shown in @fig-programs-total. Meanwhile, despite Etobicoke, Scarborough and Vaughan all have very few programs, the space available is very different. Vaughan is free most of the time, Scarborough is free half the time, while Etobicoke barely have any space throughout the year.

# Results {#sec-result}

Our results are summarized in @tbl-results with the help of tools made by @knitr and @kableextra.

```{r}
#| echo: false
#| eval: true
#| label: tbl-results
#| tbl-cap: "Average data of the year categorized by city"
#| warning: false
#| message: false

analysis_data |>
  group_by(city) |>
  summarize(shelter_program_with_space = mean(shelter_program_with_space),
            total_shelter_program = mean(total_shelter_program),
            percentage_full = mean(percentage_full)) |> 
  kable(
  col.names = c("City",
                "Average program with space",
                "Average total program",
                "Average percentage of full program"),
  digits = 1) |>
  # Based on joshpk: https://stackoverflow.com/questions/57873293/how-to-add-more-space-between-columns-of-knitrkable-in-rstudio-notebooks
  kable_styling()
```

# Discussion

## Decrease in amount of shelter programs in Toronto {#sec-toronto-decrease}

There is a huge decrease of amount of programs in Toronto area, from 29 to 20, as shown in @fig-programs-total. That is a 31% decrease. However, Toronto still have the most programs out of all cities (@fig-programs-total), @fig-programs-free shows that there is constantly programs with free space. As shown in @tbl-results, the average percentage for full shelter programs in Toronto thorughout the year is only 81.4%, the second lowest in the five cities. The reduction in program can be justify. The decreasing number of programs could be a result of decline in need for COVID quarantine program, further investigation is needed to find the cause.

## Need for shelter programs in nearby cites of Toronto {#sec-nearby-cities-need}

As shown in @fig-programs-free, Scarborough have no shelter program space most of the year, which is supported by @tbl-results, having a 97% average of full shelter programs throughout the year. In Etobicoke, the situation is even more severe, having no signs of free space in @fig-programs-free, while the average full shelter program is 99.7%(@tbl-results) , making it the only city having over 99% on average. This is likely caused by the low amount of shelter programs in these regions, having a total of 1 and 4 programs for Etobicoke and Scarborough respectively.Shelter program in those cities are constantly full throughout the year, and there is a need for more programs in those cities.

## Weaknesses and next steps {#sec-weakness}

There is quite a few weaknesses in this research. Firstly, there is many different type of programs, including COVID-19, temporary refugee, etc, which are all merged in this research. Categorizing programs by type can help us further investigate into the needs for each different type of programs, and the possible reasons of decline in Toronto shelter programs. Secondly, bed based capacity are not included in this research, and it could be further investigated to see if the results are similar or drastically different.

\newpage

\appendix

# Appendix {.unnumbered}

# Additional data details

@fig-programs-percent shows the percentage of program that is full. This figure is not used in the main discussion due to we cannot show the full graph without the graph being too dense towards the upper part.

```{r}
#| label: fig-programs-percent
#| fig-cap: Percentage of distinct program that is full in all shelter based on city
#| echo: false
#| warning: false
#| message: false

analysis_data |> 
  ggplot(aes(x = date, y = percentage_full, color = city)) +
  geom_line() +
  theme_minimal() +
  labs(x = "Date", y = "Percentage of full program", color = "City") +
  scale_color_brewer(palette = "Set1") +
  theme(legend.position = "bottom")
```

Here are some reference that is used in code but haven't mentioned in the paper: @janitor, @tellingstories, @dplyr

# References
